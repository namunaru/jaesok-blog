---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

// 폴더 내의 .md 파일들을 가져와 날짜순으로 정렬합니다.
const posts = await getCollection('review');
const sortedPosts = posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title="Gedsc">
  <section class="hero-cyber">
    <div class="morph-word">Gedsc</div>
    <p class="hero-sub serif">기록하고, 사유하고, 천천히 공유하는 문학의 흔적</p>
  </section>

  <main class="container">
    <div class="post-grid">
      {sortedPosts.map((post) => (
        <article class="post-card">
          <a href={post.data.link} target="_blank" rel="noopener noreferrer">
            <div class="thumb-box">
              <img src={post.data.thumbnail} alt={post.data.title} />
            </div>
            <div class="info-box">
              <h3 class="serif">{post.data.title}</h3>
              <p>{post.data.description}</p>
              <span class="date">{post.data.pubDate.toLocaleDateString()}</span>
            </div>
          </a>
        </article>
      ))}
    </div>
  </main>
</BaseLayout>

<style>
  .post-grid { display: grid; gap: 3rem; padding: 2rem 0; }
  .post-card a { display: flex; gap: 2rem; text-decoration: none; color: inherit; }
  .thumb-box { width: 240px; height: 150px; overflow: hidden; border-radius: 4px; }
  .thumb-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.3s; }
  .post-card:hover img { transform: scale(1.05); }
  .info-box h3 { font-size: 1.5rem; margin-bottom: 0.5rem; color: #1a1a1a; }
  .info-box p { color: #666; font-size: 0.95rem; line-height: 1.6; }
</style>