---
import BaseLayout from '../../layouts/BaseLayout.astro'; // 경로를 ../../ 로 수정
import { getCollection } from 'astro:content';

const videos = await getCollection('video');
const sortedVideos = videos.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title="영상리뷰 Archive | Gedsc">
  <div class="theme-beige">
    <section class="page-header">
      <h1 class="serif dark-text">영상리뷰 Archive</h1>
      <p class="hero-sub serif">시각과 청각으로 만나는 문학의 세계</p>
    </section>

    <main class="container">
      <div class="video-grid-archive">
        {sortedVideos.map((video) => (
          <article class="video-item">
            <a href={`/video/${video.slug}`}>
              <div class="thumb-wrap">
                {/* 중요: md파일의 'youtube' 값을 사용합니다 */}
                <img src={video.data.youtube} alt={video.data.title} />
              </div>
              <div class="info">
                <span class="date">{video.data.pubDate.toLocaleDateString('ko-KR')}</span>
                <h2 class="serif">{video.data.title}</h2>
              </div>
            </a>
          </article>
        ))}
      </div>
    </main>
  </div>
</BaseLayout>

<style>
  .theme-beige { background: #f9f7f2; min-height: 100vh; color: #1a1a1a; }
  .container { max-width: 1000px; margin: 0 auto; padding: 0 20px 100px; }
  .page-header { text-align: center; padding: 120px 0 70px; }
  .video-grid-archive { display: grid; grid-template-columns: repeat(2, 1fr); gap: 40px; }
  .thumb-wrap { aspect-ratio: 16/9; border-radius: 10px; overflow: hidden; border: 1px solid #e0ddd5; }
  .thumb-wrap img { width: 100%; height: 100%; object-fit: cover; }
</style>