---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

const videos = await getCollection('video');
const sortedVideos = videos.sort((a, b) => (b.data.pubDate?.valueOf() ?? 0) - (a.data.pubDate?.valueOf() ?? 0));
---

<BaseLayout title="영상리뷰 | gedsc">
  <main class="archive-container container">
    <header class="page-header">
      <h1 class="serif">영상리뷰</h1>
      <p class="subtitle">책을 읽고, 말로 풀어내는 기록들</p>
    </header>

    <div class="post-list">
      {sortedVideos.map(v => (
        <a href={`/video/${v.id.replace('.md', '')}`} class="post-item">
          <span class="post-title">▶ {v.data.title}</span>
          <span class="post-date">{v.data.pubDate?.toLocaleDateString('en-US')}</span>
        </a>
      ))}
    </div>
  </main>
</BaseLayout>

<style>
  .archive-container { padding: 100px 20px; max-width: 720px; }
  .page-header { text-align: center; margin-bottom: 80px; }
  .page-header h1 { font-size: 2.2rem; margin-bottom: 15px; }
  .subtitle { color: #888; font-size: 1rem; }
  .post-list { display: flex; flex-direction: column; }
  .post-item { display: flex; justify-content: space-between; align-items: baseline; padding: 22px 0; border-bottom: 1px solid rgba(0, 0, 0, 0.06); }
  .post-title { font-size: 1.1rem; flex: 1; margin-right: 20px; }
  .post-date { font-size: 0.85rem; color: #ccc; }
</style>