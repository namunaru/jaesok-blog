---
import { getEntry, render } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

const { slug } = Astro.params;
const video = await getEntry('video', slug);

if (!video) return Astro.redirect('/404');
const { Content } = await render(video);
---

<BaseLayout title={`${video.data.title} | 영상리뷰`}>
  <article class="reading-room">
    <header>
      <div class="category">영상리뷰</div>
      <h1 class="serif">{video.data.title}</h1>
      <time>{video.data.pubDate?.toLocaleDateString('ko-KR')}</time>
    </header>

    <div class="video-wrapper">
      <iframe src={`https://www.youtube.com/embed/${video.data.youtube.split('v=')[1]}`} frameborder="0" allowfullscreen></iframe>
    </div>

    <div class="prose serif">
      <Content />
    </div>
  </article>
</BaseLayout>

<style>
  .reading-room { max-width: 800px; margin: 0 auto; padding: 80px 20px; text-align: center; }
  .category { color: #8C7851; font-size: 0.9rem; margin-bottom: 1rem; }
  header h1 { font-size: 2.2rem; margin-bottom: 1rem; }
  header time { color: #999; font-size: 0.9rem; }
  .video-wrapper { position: relative; padding-bottom: 56.25%; height: 0; margin: 40px 0; }
  .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 8px; }
  .prose { text-align: left; font-size: 1.15rem; line-height: 2; margin-top: 40px; }
</style>