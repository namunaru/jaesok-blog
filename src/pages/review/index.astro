---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('review');
const sortedPosts = allPosts.filter(post => !post.data.draft).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title="북리뷰 Archive | Gedsc">
  <div class="theme-beige">
    <section class="page-header-simple">
      <h1 class="serif">북리뷰 Archive</h1>
    </section>
    <main class="container">
      <div class="archive-list">
        {sortedPosts.map((post) => (
          <article class="archive-item">
            <a href={post.data.link} target="_blank">
              <span class="cat">{post.data.category || 'Review'}</span>
              <h2 class="serif">{post.data.title}</h2>
              <p class="desc">{post.data.description}</p>
            </a>
          </article>
        ))}
      </div>
    </main>
  </div>
</BaseLayout>

<style>
  .theme-beige { background: #f9f7f2; min-height: 100vh; padding-bottom: 100px; }
  .page-header-simple { text-align: center; padding: 80px 0 50px; border-bottom: 1px solid #e0ddd5; margin-bottom: 50px; }
  .container { max-width: 800px; margin: 0 auto; padding: 0 20px; }
  .archive-list { display: flex; flex-direction: column; gap: 40px; }
  .archive-item a { text-decoration: none; color: inherit; padding: 30px; background: #fff; border-radius: 8px; display: block; box-shadow: 0 2px 10px rgba(0,0,0,0.02); }
  .cat { color: #b3934d; font-weight: bold; font-size: 0.9rem; }
  .archive-item h2 { font-size: 1.8rem; margin: 10px 0; transition: 0.3s; }
  .archive-item:hover h2 { color: #b3934d; }
</style>