---
import BaseLayout from '../../layouts/BaseLayout.astro'; // 경로를 ../../ 로 수정함
import { getCollection } from 'astro:content';

const allPosts = await getCollection('review');
const sortedPosts = allPosts
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title="북리뷰 Archive | Gedsc">
  <div class="theme-beige">
    <section class="page-header">
      <h1 class="serif dark-text">북리뷰 Archive</h1>
      <p class="hero-sub serif">기록하고, 사유하고, 천천히 공유하는 문학의 흔적</p>
    </section>

    <main class="container">
      <div class="archive-list-slim">
        {sortedPosts.map((post) => (
          <article class="archive-item-slim">
            <a href={post.data.link} target="_blank" rel="noopener noreferrer">
              <div class="meta">
                <span class="cat">{post.data.category || 'Literature'}</span>
                <span class="date">{post.data.pubDate.toLocaleDateString('ko-KR')}</span>
              </div>
              <h2 class="serif">{post.data.title}</h2>
              <p class="desc">{post.data.description}</p>
            </a>
          </article>
        ))}
      </div>
    </main>

    <footer class="site-footer">
      <p>© 2026 gedsc · 세계문학 기록실</p>
    </footer>
  </div>
</BaseLayout>

<style>
  :root { --bg-beige: #f9f7f2; --gold-deep: #b3934d; --text-dark: #1a1a1a; }
  .theme-beige { background: var(--bg-beige); color: var(--text-dark); min-height: 100vh; }
  .container { max-width: 800px; margin: 0 auto; padding: 40px 20px; }
  .page-header { text-align: center; padding: 100px 0 60px; }
  .page-header h1 { font-size: 2.8rem; margin-bottom: 15px; }
  .hero-sub { color: var(--gold-deep); font-size: 1.1rem; }

  .archive-list-slim { display: flex; flex-direction: column; gap: 40px; }
  .archive-item-slim a { text-decoration: none; color: inherit; display: block; padding: 25px; background: #fff; border-radius: 8px; transition: 0.3s; box-shadow: 0 2px 10px rgba(0,0,0,0.02); }
  .meta { font-size: 0.85rem; color: #999; margin-bottom: 10px; display: flex; gap: 15px; }
  .cat { color: var(--gold-deep); font-weight: 700; }
  .archive-item-slim h2 { font-size: 1.6rem; margin-bottom: 12px; transition: 0.3s; line-height: 1.3; }
  .desc { font-size: 0.95rem; color: #666; line-height: 1.7; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
  
  .archive-item-slim:hover { transform: translateY(-5px); }
  .archive-item-slim:hover h2 { color: var(--gold-deep); }
  .site-footer { padding: 80px 0; text-align: center; color: #bbb; border-top: 1px solid #eee; }
</style>