---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('review');
const sortedPosts = allPosts
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title="북리뷰 Archive | Gedsc">
  <div class="theme-beige">
    <section class="page-header">
      <h1 class="serif dark-text">북리뷰 Archive</h1>
      <p class="hero-sub serif">기록하고, 사유하고, 천천히 공유하는 문학의 흔적</p>
    </section>

    <main class="container">
      <div class="archive-list">
        {sortedPosts.map((post) => (
          <article class="archive-item">
            <a href={post.data.link} target="_blank" rel="noopener noreferrer">
              <div class="meta">
                <span class="cat">{post.data.category || 'Literature'}</span>
                <span class="dot">·</span>
                <span class="date">{post.data.pubDate.toLocaleDateString('ko-KR')}</span>
              </div>
              <h2 class="serif">{post.data.title}</h2>
              <p class="desc">{post.data.description}</p>
            </a>
          </article>
        ))}
      </div>
    </main>

    <footer class="site-footer">
      <p>© 2026 gedsc · 세계문학 기록실</p>
    </footer>
  </div>
</BaseLayout>

<style>
  .theme-beige { background: #f9f7f2; color: #1a1a1a; min-height: 100vh; }
  .container { max-width: 800px; margin: 0 auto; padding: 60px 20px; }
  .page-header { text-align: center; padding: 100px 0 60px; }
  .page-header h1 { font-size: 2.5rem; margin-bottom: 10px; }
  .hero-sub { color: #b3934d; font-size: 1.1rem; }

  .archive-list { display: flex; flex-direction: column; gap: 60px; }
  .archive-item a { text-decoration: none; color: inherit; display: block; }
  .meta { font-size: 0.85rem; color: #999; margin-bottom: 12px; }
  .cat { color: #b3934d; font-weight: 700; }
  .archive-item h2 { font-size: 1.8rem; margin-bottom: 15px; transition: 0.3s; }
  .desc { font-size: 1rem; color: #666; line-height: 1.8; }
  .archive-item:hover h2 { color: #b3934d; }
</style>