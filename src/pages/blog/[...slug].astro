---
import { getCollection, render } from 'astro:content';

// 1. 모든 글의 경로를 미리 생성합니다.
export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.id }, // id를 slug로 사용
    props: { post },
  }));
}

// 2. 전달받은 글 데이터를 렌더링합니다.
const { post } = Astro.props;
const { Content } = await render(post);
---
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <title>{post.data.title}</title>
    <style>
      body { font-family: 'serif'; background-color: #f9f7f2; color: #1a1a1a; margin: 0; line-height: 1.8; }
      article { max-width: 800px; margin: 60px auto; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
      h1 { font-size: 2.5rem; border-bottom: 2px solid #eee; padding-bottom: 20px; }
      .date { color: #888; margin-bottom: 40px; }
      .back-link { display: block; margin-top: 50px; text-decoration: none; color: #333; font-weight: bold; }
    </style>
  </head>
  <body>
    <article>
      <h1>{post.data.title}</h1>
      <p class="date">작성일: {post.data.pubDate.toLocaleDateString()}</p>
      <div class="content">
        <Content />
      </div>
      <a href="/" class="back-link">← 목록으로 돌아가기</a>
    </article>
  </body>
</html>
