---
import { getCollection } from 'astro:content';

/**
 * 1. 블로그 글 불러오기
 * - draft 제외
 * - 날짜 기준 최신순 정렬
 */
const posts = (await getCollection('blog'))
  .filter(post => !post.data.draft)
  .sort((a, b) => {
    const aTime = a.data.pubDate ? a.data.pubDate.getTime() : 0;
    const bTime = b.data.pubDate ? b.data.pubDate.getTime() : 0;
    return bTime - aTime;
  });
---

<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <title>북리뷰 | 조용한 세계문학 서재</title>

    <style>
      body {
        font-family: 'serif';
        background-color: #f9f7f2;
        color: #1a1a1a;
        margin: 0;
        line-height: 1.8;
      }

      nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 50px;
        background: white;
        border-bottom: 1px solid #eee;
      }

      .logo {
        font-weight: bold;
        font-size: 1.2rem;
      }

      .menu a {
        margin: 0 15px;
        text-decoration: none;
        color: #333;
        font-weight: 500;
      }

      main {
        max-width: 820px;
        margin: 80px auto;
        padding: 0 20px;
      }

      h1 {
        font-size: 2.4rem;
        font-weight: 500;
        margin-bottom: 10px;
      }

      .subtitle {
        color: #555;
        margin-bottom: 40px;
      }

      .post-list {
        list-style: none;
        padding: 0;
      }

      .post-item {
        padding: 25px 0;
        border-bottom: 1px solid #e0e0e0;
      }

      .post-item:last-child {
        border-bottom: none;
      }

      .post-title {
        font-size: 1.3rem;
        text-decoration: none;
        color: #000;
        border-bottom: 1px solid transparent;
      }

      .post-title:hover {
        border-bottom-color: #000;
      }

      .post-date {
        display: block;
        margin-top: 8px;
        font-size: 0.85rem;
        color: #888;
      }

      footer {
        margin-top: 120px;
        padding: 50px;
        font-size: 0.9rem;
        color: #888;
        border-top: 1px solid #eee;
        text-align: center;
      }
    </style>
  </head>

  <body>
    <nav>
      <div class="logo">조용한 세계문학 서재</div>

      <div class="menu">
        <a href="/">홈</a>
        <a href="/review">북리뷰</a>
        <a href="/video">북영상</a>
      </div>
    </nav>

    <main>
      <h1>북리뷰</h1>
      <p class="subtitle">
        기록하고, 사유하고, 천천히 공유하는 문학의 흔적
      </p>

      {posts.length === 0 ? (
        <p style="color:#999;">아직 등록된 리뷰가 없습니다.</p>
      ) : (
        <ul class="post-list">
          {posts.map(post => (
            <li class="post-item">
              <a
                class="post-title"
                href={`/blog/${post.slug}`}
              >
                {post.data.title}
              </a>

              {post.data.pubDate && (
                <span class="post-date">
                  {post.data.pubDate.toLocaleDateString()}
                </span>
              )}
            </li>
          ))}
        </ul>
      )}
    </main>

    <footer>
      <p>© 2025 gedsc · 조용한 세계문학 서재</p>
      <p>세계문학을 읽고, 기록하고, 사유하는 개인 서재</p>
    </footer>
  </body>
</html>
